<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfil MovePlus</title>
    <link rel="sortcut icon" href="../Login/img/favicon.png" type="image/x-icon" />
    <link href="https://use.fontawesome.com/releases/v5.0.1/css/all.css" rel="stylesheet">
    <link rel="stylesheet" href="./css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@300;400;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./css/tablet.css">
    <link rel="stylesheet" href="./css/desktop.css">
    <link rel="stylesheet" href="./css/profile.css">
</head>
<body>
    <header>
        <nav>
        <div class="esconder">
            <div class="icon-menuHamburguer">
                <img src="./img/icon-menu-hamburgue.png" alt="">
            </div>
            <div class="profile-notification">
                <div class="popup" onclick="myFunction()">
                    <span class="popuptext" id="myPopup">
                        <h3>
                            Notificações
                        </h3>
                        <p>
                            Sem novas Notificações
                        </p>
                    </span>
                    <img src="./img/icon-notification2.png" alt="" style="margin: 5px 10px 0 0; width: 37px;">
                </div>

                <div class="profile-menu" id="btnMobileProf">
                    <img src="./img/perfil (2).png" alt="" class="img-profile">
                    <i class="fas fa-angle-down"></i>
                    <div class="menu-profile">
                            <ul>
                                <li>
                                    <a href="#">
                                        <img src="./img/perfil (2).png" alt="" class="img-profile logout-perfil">
                                        Perfil
                                    </a>
                                </li>

                                <li>
                                    <a href="#" onclick="logout()">
                                        <img src="./img/icon-logout.png" alt="" class="logout-perfil" style="border-radius: 0; box-shadow: none; border: none !important;">
                                        Logout
                                    </a>
                                </li>
                            </ul>
                    </div>
                </div>
            </div>
        </div>
            <ul class="menu-hidden" id="menuHidden">
                <div class="logo">
                    <img src="./img/logo-movePlus.png" alt="">
                </div>
                <div class="link">
                    <a href="../Login/viewEstation.html">Ver estações</a>
                </div>
                <li>
                    <a href="./dash.html">
                        <img src="./img/icon-dashboard.png" alt="">
                        Dashboard
                    </a>
                </li>

                <li>
                    <a href="./cadTerminais.html">
                        <img src="./img/icon-machina.png" alt="">
                        Nova Maquina
                    </a>
                </li>

                <li class="item-active">
                    <a href="./perfil.html">
                        <img src="./img/user-icon.png" alt="">
                        Perfil
                    </a>
                </li>

                <li class="btn-logout" onclick="logout()">
                    <a>
                        <img src="./img/icon-logout.png" alt="">
                        Logout
                    </a>
                </li>
            </ul>
        </nav>
    </header>

    <main style="background: linear-gradient(to right, #48bfe3, #72efdd); background-repeat: no-repeat; height: 320px; border-radius: 0 0 5px 5px;">
        <section class="container-flex">
            <div class="flex-station">
                <div class="viewStation">
                    <div class="station">
                        <p>Estação Trianom Masp</p>
                    </div>
                    <div class="profile-notification perfil-desk">
                    <div class="popover">
                        <img src="./img/icon-notification.png" alt="" class="active-pop">
                        <div class="pop">
                            <div class="popuptext">
                                <div style="padding: 20px 30px; box-sizing: border-box;">
                                <h3>
                                    Notificações
                                </h3>
                                <p>
                                    Sem novas Notificações
                                </p>
                                </div>
                            </div> 
                        </div>
                    </div>
                    <div class="profile">
                        <img src="./img/perfil (2).png" alt="" class="img-profile">

                        <h3 class="muda" id="user">Fernando Laurito</h3>

                        <i class="fas fa-angle-down" id="info-profile"></i>

                        <i class="fas fa-angle-up" id="up-profile" style="color: #3d3d3dc5; display:none;"></i>
                        <div class="profile-active">
                            
                            <ul>
                                <li>
                                    <a href="#">
                                        <img src="./img/perfil (2).png" alt="" class="img-profile logout-perfil">
                                        Perfil
                                    </a>
                                </li>

                                <li>
                                    <a href="#" onclick="logout()">
                                        <img src="./img/icon-logout.png" alt="" class="logout-perfil" style="border-radius: 0; box-shadow: none; border: none !important;">
                                        Logout
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    </div>
                </div>
            </div>

            <!-- ------------------------- -->
        
            <div class="flex-profile">
                <div>
                <div class="viewProfile">
                    <h3>Perfil</h3>
                    <p>Visualize e atualize suas informações de perfil !</p>
                </div>
                    <div class="cards-profile">
                        <div class="card-profile">
                            <div class="img-card">
                                <div>
                                    <img src="./img/perfil (2).png" alt="">
                                </div>
                            </div> 
                            <div class="name-profile">
                                <h3>Fernando Laurito</h3>
                                <p>Credêncial: <span id="credencialImg"></span></p>
                            </div> 
                        </div>

                        <div class="info-profile">
                            <div>
                               <label for="">Email:</label>
                               <input type="text" id="userProfile" Use readonly=true>
                            </div>
                            
                            <div>
                                <label for="">Credêncial:</label>
                                <input type="text" id="credencialProf" Use readonly=true>
                             </div>   

                             <div>
                                <label for="">Senha:</label>
                                <input type="text" id="senhaProf" Use readonly=true>
                             </div>
                             
                             <div>
                                <button class="update">
                                    Atualizar
                                </button>
                             </div>   

                        </div>
                    </div>
                    </div>
                    <footer>
                        <div class="copy">
                            <h3>© MovePlus 2020</h3>
                            <p>Todos os direitos reservados.</p>
                        </div>
                     </footer>
                </div>
            </div>
        </section>
    </main>
</body>
<script src="../Login/script.js"></script>
<script src="./auth.js"></script>
<script type="text/javascript">
    // <![CDATA[
    var ttChatLoaderS = document.createElement('script');
    document.tomticketChatLoaderScriptVersion = 2;
    ttChatLoaderS.src = 'https://moveplus.tomticket.com/scripts-chat/chat.min.js'
    + '?id=EP50568'
    + '&account=3236352P24102020060047'
    + '&autoOpen=0'
    + '&hideWhenOffline=0'
    + '&d=moveplus'
    + '&ts=' + new Date().getTime()
    + '&ref=' + encodeURIComponent(document.URL);
    document.body.appendChild(ttChatLoaderS);
    //]]>
    </script>  
</html>

<script>

function menuActive() {
    const btnMenu = document.querySelector(".icon-menuHamburguer img");
    const ulMenu = document.getElementById('menuHidden');

    function openMenu(){
        ulMenu.classList.toggle("menu-hidden");
    }

    btnMenu.addEventListener("click", openMenu);
};

menuActive();

function myFunction() {
  var popup = document.getElementById("myPopup");
  popup.classList.toggle("show");
}

const popover = document.querySelector('.pop');
const activePop = document.querySelector('.active-pop');

function activePopover(){
    popover.classList.toggle("popBlock");
}

activePop.addEventListener("click", activePopover);


function profile(){
    const profileActive = document.querySelector(".profile-active");
    const infoProfile = document.querySelector("#info-profile");
    const profile = document.querySelector(".profile");
    const profileTxt = document.querySelector(".muda");
    const upProfile = document.querySelector("#up-profile");

    function activeProfile(){
        profileActive.classList.toggle("popBlock");
        profile.classList.toggle("profile-teste");
        profileTxt.classList.toggle("profileTxta");
        infoProfile.classList.toggle("none"); 
        upProfile.classList.toggle("popBlock");
    }

    infoProfile.addEventListener("click", activeProfile);
    upProfile.addEventListener("click", activeProfile);
}
profile();

const user = JSON.parse(sessionStorage.user);
const identityUser = document.querySelector("#user");
const identityUserProfile = document.querySelector("#userProfile");
const identitySenhaProfile = document.querySelector("#senhaProf");
const identityCredencialProfile = document.querySelector("#credencialProf");
const identityCredencialProfileImg = document.querySelector("#credencialImg");

identityUser.innerHTML = user.email;
identityUserProfile.value = user.email;
identitySenhaProfile.value = user.senha;
identityCredencialProfile.value = user.credencial;
identityCredencialProfileImg.innerHTML = user.credencial;

const btnProfMenu = document.querySelector("#btnMobileProf");
const activeProfMenu = document.querySelector(".menu-profile");

function activeProf(){
    activeProfMenu.classList.toggle("popBlock");
}

btnProfMenu.addEventListener("click", activeProf);

</script>

